{"mimetype": null, "last_modified": "2017-02-09T15:02:11.072786+00:00", "type": "notebook", "writable": true, "content": {"nbformat_minor": 2, "metadata": {"kernelspec": {"name": "python3", "display_name": "Python 3", "language": "python"}, "language_info": {"mimetype": "text/x-python", "version": "3.5.2", "codemirror_mode": {"version": 3, "name": "ipython"}, "nbconvert_exporter": "python", "name": "python", "file_extension": ".py", "pygments_lexer": "ipython3"}}, "cells": [{"outputs": [{"output_type": "stream", "name": "stdout", "text": "        \uc18c\uc720\ud615  \ud380\ub4dc\uc218        \uc124\uc815\uc561   1\uac1c\uc6d4 \uc99d\uac10\uc561      \uc62c\ud574     1\uac1c\uc6d4     3\uac1c\uc6d4       1\ub144\n0   K200\uc778\ub371\uc2a4   71    74321.0   -1245.0    2.94    1.71    6.62    16.38\n1      \ubc30\ub2f9\uc8fc\uc2dd   40    25747.0   -1165.0    0.25    0.13    3.18     3.52\n2      \uc77c\ubc18\uc8fc\uc2dd  320   142048.0   -3761.0    0.75   -0.08    2.80    -0.33\n3     \uc911\uc18c\ud615\uc8fc\uc2dd   34    15415.0   -1435.0   -1.88   -2.33   -1.05   -13.23\n4      \ud14c\ub9c8\uc8fc\uc2dd   58    24907.0    -549.0     N/A     N/A     N/A      N/A\n5     \uae30\ud0c0\uc778\ub371\uc2a4  166    65174.0     821.0     N/A     N/A     N/A      N/A\n6   \uacf5\uaca9\uc801\uc790\uc0b0\ubc30\ubd84   23     1527.0     -44.0    0.76    0.47    2.65     2.34\n7    \uc77c\ubc18\uc8fc\uc2dd\ud63c\ud569   81    25118.0     268.0    0.64    0.19    2.32     3.63\n8    \uc77c\ubc18\ucc44\uad8c\ud63c\ud569  228    88128.0    -951.0   -0.09   -0.36    0.20    -0.66\n9   \ubcf4\uc218\uc801\uc790\uc0b0\ubc30\ubd84   39     7041.0    -297.0   -0.41   -0.30   -0.92     0.41\n10    \ucd08\ub2e8\uae30\ucc44\uad8c   21    47927.0    -992.0    0.21    0.15    0.39     1.37\n11     \uc77c\ubc18\ucc44\uad8c   66    47010.0    1510.0    0.29    0.20    0.18     1.37\n12     \uc6b0\ub7c9\ucc44\uad8c   27    14521.0    -801.0    0.22    0.16   -0.43     0.69\n13     \uc911\uae30\ucc44\uad8c   55    37889.0   -1314.0    0.23    0.18   -1.05     0.45\n14      MMF  124  1048466.0  129583.0    0.14    0.11    0.32     1.31\n15    \ubd80\ub3d9\uc0b0\uc784\ub300    2      673.0       0.0    0.63    0.52    1.41     9.73\n16  \ubd80\ub3d9\uc0b0\ub300\ucd9c\ucc44\uad8c    6     5528.0       0.0    2.81    0.26    0.14    -0.73\n17  \uacf5\ubaa8\uc8fc\ud558\uc774\uc77c\ub4dc    6     2306.0    -164.0    0.60    0.40    1.44     2.63\n18     \ucc44\uad8c\uc54c\ud30c   57    18121.0   -1219.0    0.13    0.01    0.56     1.03\n19     \uc2dc\uc7a5\uc911\ub9bd   26     2339.0     -58.0   -0.16   -0.20    0.10    -0.51\n               \uc18c\uc720\ud615  \ud380\ub4dc\uc218      \uc124\uc815\uc561  1\uac1c\uc6d4 \uc99d\uac10\uc561      \uc62c\ud574     1\uac1c\uc6d4     3\uac1c\uc6d4      1\ub144\n0            \ub7ec\uc2dc\uc544\uc8fc\uc2dd    8   4373.0    251.0    2.58    0.08   21.11   56.82\n1          \uc720\ub7fd\uc2e0\ud765\uad6d\uc8fc\uc2dd    7   1416.0    -23.0    2.53    1.28   15.25   32.25\n2             \uae08\uc735\uc139\ud130    5    605.0    350.0    0.67   -0.26   12.47   22.41\n3           \uc77c\ubc18\uc0b0\uc5c5\uc139\ud130    1     67.0      3.0   -2.99   -2.23   11.41   20.50\n4           \uae30\ucd08\uc18c\uc7ac\uc139\ud130    9   5083.0    521.0   10.36    5.86   11.22   53.14\n5             \uc77c\ubcf8\uc8fc\uc2dd   29   4428.0     24.0    0.34   -1.69   10.23   12.68\n6         \ud504\ub860\ud2f0\uc5b4\ub9c8\ucf13\uc8fc\uc2dd    1     49.0     -1.0    3.50    1.91    9.74    9.34\n7           \uc815\ubcf4\uae30\uc220\uc139\ud130    3    257.0     49.0    4.01    3.12    9.40   23.37\n8             \ub3c5\uc77c\uc8fc\uc2dd    2    165.0    -12.0   -0.75   -1.60    8.13   15.91\n9             \uc720\ub7fd\uc8fc\uc2dd   29   8777.0   -655.0    0.31   -0.91    7.79   11.73\n10            \ubd81\ubbf8\uc8fc\uc2dd   27   2497.0    103.0    2.07    1.12    7.46   18.04\n11           \uc18c\ube44\uc7ac\uc139\ud130    3     74.0      7.0    2.00    1.87    6.74   13.66\n12          \ud5ec\uc2a4\ucf00\uc5b4\uc139\ud130   11   2882.0     -5.0    4.81    1.44    6.26    3.95\n13           \uc5d0\ub108\uc9c0\uc139\ud130    9   1059.0     36.0   -2.74   -3.79    5.56   18.10\n14           \uae00\ub85c\ubc8c\uc8fc\uc2dd   61  14266.0   -463.0    1.64    0.51    5.55   12.90\n15            \uba40\ud2f0\uc139\ud130    3    451.0     18.0    0.74   -0.26    3.86   14.18\n16        \uae00\ub85c\ubc8c\uc2e0\ud765\uad6d\uc8fc\uc2dd   45  12353.0   -316.0    4.78    2.28    3.47   27.44\n17            \uc778\ub3c4\uc8fc\uc2dd   20   3116.0    123.0    6.54    4.51    2.84   16.77\n18           \ube0c\ub77c\uc9c8\uc8fc\uc2dd    8   1005.0      8.0    7.83    3.51    2.33   72.90\n19        \uc544\uc2dc\uc544\ud0dc\ud3c9\uc591\uc8fc\uc2dd   15    775.0   -100.0    1.85    0.52    1.73    7.01\n20           \ub3d9\ub0a8\uc544\uc8fc\uc2dd   11    891.0    -89.0    1.63    0.20    1.50   13.50\n21        \uc544\uc2dc\uc544\uc2e0\ud765\uad6d\uc8fc\uc2dd   22   3479.0   -333.0    4.33    2.03    0.87   13.74\n22            \uc911\uad6d\uc8fc\uc2dd  143  58321.0   -657.0    4.05    1.92    0.20   14.94\n23           \ubca0\ud2b8\ub0a8\uc8fc\uc2dd    9   2112.0     34.0    2.59    0.60    0.03     N/A\n24  \uc544\uc2dc\uc544\ud0dc\ud3c9\uc591\uc8fc\uc2dd(ex J)   20   6170.0   -117.0    1.76    0.14   -0.36    5.01\n25          \uae30\ud0c0\uad6d\uac00\uc8fc\uc2dd    4    297.0      1.0    0.33   -2.95   -0.64    8.09\n26         \ub0a8\ubbf8\uc2e0\ud765\uad6d\uc8fc\uc2dd    7   1330.0    -37.0    6.89    3.96   -1.82   37.87\n27          \ubd81\ubbf8\uc8fc\uc2dd\ud63c\ud569    7   1995.0   -101.0    1.49    0.70    4.50   13.99\n28         \uc2e0\ud765\uad6d\uc8fc\uc2dd\ud63c\ud569    1    188.0    188.0    5.09    2.41    4.40   25.36\n29     \uae00\ub85c\ubc8c \uacf5\uaca9\uc801\uc790\uc0b0\ubc30\ubd84   25   4666.0    -20.0    2.97    1.72    3.18    7.73\n30         \uae00\ub85c\ubc8c\uc8fc\uc2dd\ud63c\ud569   20   2597.0     97.0    1.56    0.65    2.46    7.62\n31    \uc544\ud0dc\uc8fc\uc2dd\ud63c\ud569(ex J)    6    860.0    -15.0    1.39    0.58    1.33    9.24\n32      \uc544\uc2dc\uc544\uc2e0\ud765\uad6d\uc8fc\uc2dd\ud63c\ud569   12   2896.0    -67.0    2.83    1.30   -0.44   11.64\n33       \uc720\ub7fd\uc2e0\ud765\uad6d\ucc44\uad8c\ud63c\ud569    1     18.0      4.0    0.56   -0.11    7.36   17.96\n34          \uc77c\ubcf8\ucc44\uad8c\ud63c\ud569    1     44.0     -2.0    0.79   -0.04    4.25    4.02\n35          \uc720\ub7fd\ucc44\uad8c\ud63c\ud569    1    196.0     -9.0    0.52    0.05    3.18    4.90\n36          \ubd81\ubbf8\ucc44\uad8c\ud63c\ud569    2     62.0     18.0    0.60    0.30    2.55    6.50\n37         \uae00\ub85c\ubc8c\ucc44\uad8c\ud63c\ud569   26   2579.0     60.0    1.10    0.44    2.08    3.81\n38          \ub0a8\ubbf8\ucc44\uad8c\ud63c\ud569    1     10.0     11.0    2.34    0.97    1.58   19.40\n39         \uc2e0\ud765\uad6d\ucc44\uad8c\ud63c\ud569    5    572.0     42.0    2.13    0.97    1.39   12.30\n40     \uae00\ub85c\ubc8c \ubcf4\uc218\uc801\uc790\uc0b0\ubc30\ubd84   24   1836.0     19.0    0.63    0.20    0.98    3.38\n41          \uc544\ud0dc\ucc44\uad8c\ud63c\ud569    1     56.0      8.0    0.46    0.00    0.68    4.90\n42      \uc544\uc2dc\uc544\uc2e0\ud765\uad6d\ucc44\uad8c\ud63c\ud569   13   1857.0    -16.0    1.52    0.73   -0.25    4.62\n43    \uc544\ud0dc\ucc44\uad8c\ud63c\ud569(ex J)    7   1607.0    -40.0    0.40    0.27   -2.25   -1.19\n44       \uae00\ub85c\ubc8c\ud558\uc774\uc77c\ub4dc\ucc44\uad8c   25   6127.0    727.0    1.30    0.93    3.29   16.70\n45         \ub0a8\ubbf8\uc2e0\ud765\uad6d\ucc44\uad8c    2     38.0     13.0    2.47    1.26    1.92   21.47\n46           \uae00\ub85c\ubc8c\ucc44\uad8c   34  29857.0   3851.0    0.74    0.33   -0.21    4.81\n47     \uc544\uc2dc\uc544\ucc44\uad8c(ex J)   14   2217.0    155.0    0.72    0.28   -0.34    4.11\n48           \uc2e0\ud765\uad6d\ucc44\uad8c   15   1148.0    -33.0    1.89    1.02   -0.99    9.14\n49            \ubd81\ubbf8\ucc44\uad8c    8   3865.0     -1.0    0.48   -0.01   -1.50    3.73\n50       \uc544-\ud0dc \ub9ac\uce20\uc7ac\uac04\uc811    3    310.0     -5.0    0.10   -1.63    3.38    8.72\n51        \uae00\ub85c\ubc8c\ub9ac\uce20\uc7ac\uac04\uc811   12   1790.0     17.0    0.94   -2.04    3.18    5.76\n52          \uae00\ub85c\ubc8c\ubd80\ub3d9\uc0b0    4   9285.0      0.0   -1.83   -1.42    2.98    6.39\n53         \uc77c\ubcf8\ub9ac\uce20\uc7ac\uac04\uc811    3    266.0     -7.0   -2.32   -2.55    2.50    2.45\n54            \ucee4\uba38\ub354\ud2f0   31   9742.0     12.0    1.64    0.01    4.59   16.72\n"}], "metadata": {"collapsed": false, "deletable": true, "trusted": true, "scrolled": true, "editable": true}, "execution_count": 1, "cell_type": "code", "source": "import requests\nimport bs4\nimport pandas as pd\n\ndef extractDf(url):\n    r = requests.get(url)\n    html = r.text\n\n    soup = bs4.BeautifulSoup(html, 'html.parser')\n    allRows = soup.find('tbody').find_all('tr')\n\n    results = [[data.text.split('?')[0].replace('\\n','').replace('\\t','') for data in td.find_all('td')]\\\n               for td in allRows]\n\n    rowspan = [] #row\n\n    for tr_no, tr in enumerate(allRows): #enumerate returns index, data \n        tmp = []\n        for td_no, data in enumerate(tr.find_all('td')):\n            if data.has_attr(\"rowspan\"):\n                rowspan.append((tr_no, td_no, int(data[\"rowspan\"]), data.get_text().split('?')[0].replace('\\n','').replace('\\t','')))\n\n    if rowspan:\n        for i in rowspan:\n            for j in range(1, i[2]):\n                results[i[0]+j].insert(i[1],i[3])\n\n    headers=[]\n\n    for i in range(2,11):\n        if i==6:\n            continue\n        elif i==9:\n            headers.append(soup.find('thead').find('th',{'class':'th_result'+str(i)+'_on'}).text)\n        else:\n            headers.append(soup.find('thead').find('th',{'class':'th_result'+str(i)}).text)    \n\n    df = pd.DataFrame(data=results)\n    df = df.drop(0,1)\n    df.columns = headers\n    \n    df['\uc124\uc815\uc561'] = df['\uc124\uc815\uc561'].str.replace(',','').astype(float)\n    df['1\uac1c\uc6d4 \uc99d\uac10\uc561'] = df['1\uac1c\uc6d4 \uc99d\uac10\uc561'].str.replace(',','').astype(float)\n    return df\n\ndomesticDf=extractDf('http://info.finance.naver.com/fund/fundTypeEarningRate.nhn?ivstAreaWorldYn=N')\noverseasDf=extractDf('http://info.finance.naver.com/fund/fundTypeEarningRate.nhn?ivstAreaWorldYn=Y')\nprint (domesticDf)\nprint (overseasDf)"}, {"outputs": [], "metadata": {"collapsed": true, "deletable": true, "trusted": true, "editable": true}, "execution_count": null, "cell_type": "code", "source": "\n"}], "nbformat": 4}, "name": "Crawler.ipynb", "created": "2017-02-09T15:02:11.072786+00:00", "format": "json", "path": "fuzzy_py3/Crawler.ipynb"}n"4S      Xû…`Xû…`=mH=Xüw   W    :http://0.0.0.0:8080/api/contents/fuzzy_py3/Crawler.ipynb?type=notebook&_=1486801245557 necko:classified 1 strongly-framed 1 request-method GET response-head HTTP/1.1 200 OK
Date: Sat, 11 Feb 2017 08:20:48 GMT
Content-Security-Policy: frame-ancestors 'self'; report-uri /api/security/csp-report; default-src 'none'
Server: TornadoServer/4.4.2
Content-Type: application/json
Content-Length: 10877
Last-Modified: Thu, 09 Feb 2017 15:02:11 GMT
Etag: "95f2f912d2ba1ca16a528a351da75a70e3b8bd1f"
 original-response-headers Date: Sat, 11 Feb 2017 08:20:48 GMT
Content-Security-Policy: frame-ancestors 'self'; report-uri /api/security/csp-report; default-src 'none'
Server: TornadoServer/4.4.2
Content-Type: application/json
Content-Length: 10877
Last-Modified: Thu, 09 Feb 2017 15:02:11 GMT
Etag: "95f2f912d2ba1ca16a528a351da75a70e3b8bd1f"
   *}